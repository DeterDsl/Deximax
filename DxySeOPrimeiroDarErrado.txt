-- Deximax V8
local whitelist = {
    "Djekejsn",
    "Determinado_0",
    "hackmod_01299",
    "Davi_gamer20221", 
    "BRUXOXXX157"
    "greenespadachin"
    "pietiero"
}

local function isPlayerInWhitelist(playerName)
    for _, name in ipairs(whitelist) do
        if name == playerName then
            return true
        end
    end
    return false
end

local player = game.Players.LocalPlayer

if not isPlayerInWhitelist(player.Name) then
    player:Kick("Você Não esta na lista para usar a Deximax")
    return
end

print("Bem-vindo ao deximax " .. player.Name .. " !")


loadstring(game:HttpGet("https://raw.githubusercontent.com/DeterDsl/Deximax/refs/heads/main/Deximax%20RedzLib.txt"))()

MakeWindow({
  Hub = {
    Title = " LegyDeximax | V8.0",
    Animation = "Versao do hub: 8.0"
  },
    Key = {
    KeySystem = False,
    Title = "Deximax Key",
    Description = "Equipe Deximax: Garanta sua key a baixo.",
    KeyLink = "LegyDeximaxTeam",
    Keys = {"LegyDeximaxTeam"},
    Notifi = {
      Notifications = true,
      CorrectKey = "iniciando o script...",
      Incorrectkey = "A key esta incorreta",
      CopyKeyLink = "Copiado para a Clipboard"
    }
  }
})

MinimizeButton({
  Image = "rbxassetid://106685753879483",
  Size = {32, 32},
  Color = Color3.fromRGB(0, 0, 0),
  Corner = true,
  Stroke = false,
  StrokeColor = Color3.fromRGB(255, 255, 255)
})

-- ID do som a ser reproduzido quando o código for executado
local soundId = "rbxassetid://9125402735"

-- Função para tocar o som
local function playSound()
    local sound = Instance.new("Sound")
    sound.SoundId = soundId
    sound.Parent = game.Workspace -- Coloque no Workspace para garantir que seja ouvido
    sound:Play()
end

-- Tocar o som assim que o script for executado
playSound()

local Main = MakeTab({Name = "Creditos e Etc..."})

-- Create a label to show the number of players
local playerCountLabel = AddTextLabel(Main, "Jogadores Online no servidor: " .. #game.Players:GetPlayers())

-- Função para atualizar o número de jogadores quando alguém entra ou sai do jogo
local function updatePlayerCount()
    playerCountLabel.Text = "Jogadores No Servidor: " .. #game.Players:GetPlayers()
end

-- Atualiza a contagem de jogadores no início (caso tenha jogadores ao carregar o script)
updatePlayerCount()

local Label = AddTextLabel(Main,
{"Bem vindo ao LegyDeximax"})
local Label = AddTextLabel(Main,
{"Adicionado: Esp Tab e Bankill tab, Bankill melhorado"})
local Label = AddTextLabel(Main,
{"por: Irgal e nzx"})
local Label = AddTextLabel(Main,
{"Helpers: Peixotin, gustavo, maz, qujo, ? dog e Shnmac"})
local Label = AddTextLabel(Main,
{"Ultimo uptade do hub: 3/11/2024 2:00 da manha"})
local Label = AddTextLabel(Main,
{"Use a deximax com responsabilidade"})
local Label = AddTextLabel(Main,
{"aproveite o Hub!!"})

local Main = MakeTab({Name = "Trolling⚠️"})

local Label = AddTextLabel(Main,
{"[!] Use o Fly do infinite yield, para quando voce for Flingar ou matar alguem você não bugar e morrer."})

-- Função para enviar notificações
function MakeNotifi(notification)
    game.StarterGui:SetCore("SendNotification", {
        Title = notification.Title;
        Text = notification.Text;
        Duration = notification.Time;
    })
end

-- Variáveis e funções para a visualização dos jogadores
local viewEnabled = false
local selectedViewPlayer = nil
local characterAddedConnection = nil

local function toggleView(enabled)
    if enabled then
        if selectedViewPlayer then
            local player = selectedViewPlayer
            if player then
                game.Workspace.CurrentCamera.CameraSubject = player.Character
                if characterAddedConnection then
                    characterAddedConnection:Disconnect()
                end
                characterAddedConnection = player.CharacterAdded:Connect(function(character)
                    game.Workspace.CurrentCamera.CameraSubject = character
                end)
                MakeNotifi({
                    Title = "LegyDeximax View " .. player.Name,
                    Text = "Você está visualizando o jogador: " .. player.Name,
                    Time = 6
                })
            else
                print("Jogador não encontrado.")
                viewEnabled = false
            end
        else
            print("Nenhum jogador selecionado para a visualização.")
            viewEnabled = false
        end
    else
        if characterAddedConnection then
            characterAddedConnection:Disconnect()
            characterAddedConnection = nil
        end
        game.Workspace.CurrentCamera.CameraSubject = game.Players.LocalPlayer.Character
    end
end

local value = "" -- Variável para armazenar o nome digitado

local function findPlayerByPartialNameOrNickname(partialName)
    value = partialName -- Atualiza a variável com o nome digitado completo
    for _, player in ipairs(game.Players:GetPlayers()) do
        if player.Name:lower():find(partialName:lower(), 1, true) or (player.DisplayName and player.DisplayName:lower():find(partialName:lower(), 1, true)) then
            return player
        end
    end
    return nil
end

-- Adicionando a caixa de texto para entrada do nome ou apelido do jogador
AddTextBox(Main, {
    Name = "Digite o Nome ou Apelido do Jogador",
    Default = "",
    PlaceholderText = "Digite aqui para view",
    ClearText = true,
    Callback = function(value)
        if value == "" then
            MakeNotifi({
                Title = "Erro",
                Text = "Nome do jogador não foi digitado.",
                Time = 5
            })
            if viewEnabled then
                toggleView(false)
            end
            return
        end

        selectedViewPlayer = findPlayerByPartialNameOrNickname(value)
        if selectedViewPlayer then
            print("Jogador encontrado: " .. selectedViewPlayer.Name)
            if viewEnabled then
                toggleView(false)
                toggleView(true)
            end
        else
            MakeNotifi({
                Title = "Erro",
                Text = "Nenhum jogador encontrado com esse nome ou apelido.",
                Time = 7
            })
            if viewEnabled then
                toggleView(false)
            end
        end
    end
})

-- Adicionando o toggle para ativar/desativar a visualização
AddToggle(Main, {
    Name = "View",
    Default = false,
    Callback = function(enabled)
        viewEnabled = enabled
        toggleView(enabled)
    end
})

-- Conectando eventos de jogador removido
game.Players.PlayerRemoving:Connect(function(player)
    if selectedViewPlayer == player then
        selectedViewPlayer = nil
        if viewEnabled then
            toggleView(false)
            MakeNotifi({
                Title = "Jogador Saiu",
                Text = player.Name .. " saiu do jogo. Visualização desativada.",
                Time = 5
            })
        end
    end
end)

-- Função para manter a câmera no jogador selecionado
local function maintainView()
    while wait() do
        if viewEnabled and selectedViewPlayer then
            local player = selectedViewPlayer
            if player and game.Workspace.CurrentCamera.CameraSubject ~= player.Character then
                game.Workspace.CurrentCamera.CameraSubject = player.Character
            end
        end
    end
end

-- Iniciando a função de manutenção da câmera
spawn(maintainView)

local section = AddSection(Main, {"Matar Pessoas"})

-- Serviços necessários
local playerService = game:GetService('Players')
local runService = game:GetService('RunService')
local localPlayer = playerService.LocalPlayer
local backpack = localPlayer:FindFirstChildOfClass('Backpack')

-- Variáveis globais
local flingV14Toggle = false
local selectedFlingPlayerV14 = nil
local flingV14Connection
local playerSpawnedConnection

-- Função para obter a lista de jogadores
local function getPlayerList()
    local playerList = {}
    for _, player in ipairs(playerService:GetPlayers()) do
        if player ~= localPlayer then
            table.insert(playerList, player.Name)
        end
    end
    return playerList
end

-- Função para atualizar o dropdown
local function updateDropdown(dropdown)
    UpdateDropdown(dropdown, getPlayerList())
end

-- Função para equipar o item "Couch"
local function equipCouch()
    if backpack then
        local couchItem = backpack:FindFirstChild("Couch")
        if couchItem then
            couchItem.Parent = localPlayer.Character
            local humanoid = localPlayer.Character:FindFirstChildOfClass("Humanoid")
            if humanoid then
                humanoid:EquipTool(couchItem)
            end
        else
            warn("Couch not found in backpack")
        end
    end
end

-- Função para teleportar para a coordenada
local function teleportToCoordinate()
    local teleportPosition = Vector3.new(-938398297, 278725666, -938365017) -- Coordenada para onde você deseja teleportar
    localPlayer.Character.HumanoidRootPart.CFrame = CFrame.new(teleportPosition)
end

-- Função para flingar jogador (V14)
local function flingV14(targetPlayerName)
    local targetPlayer = playerService:FindFirstChild(targetPlayerName)
    if targetPlayer and targetPlayer.Character and targetPlayer.Character:FindFirstChild("HumanoidRootPart") then
        -- Looping de teleportes no jogador selecionado
        flingV14Connection = runService.Heartbeat:Connect(function()
            if targetPlayer and targetPlayer.Character and targetPlayer.Character:FindFirstChild("HumanoidRootPart") then
                localPlayer.Character.HumanoidRootPart.CFrame = targetPlayer.Character.HumanoidRootPart.CFrame
            end

            -- Verifica se o jogador sentou no 'SeatCouch' e realiza o teleporte para a coordenada
            if targetPlayer.Character:FindFirstChild("Humanoid") and targetPlayer.Character.Humanoid.SeatPart then
                teleportToCoordinate()
                flingV14Connection:Disconnect()
            end
        end)
    end
end

-- Função para detectar quando o jogador renasce
local function onPlayerRespawned(targetPlayer)
    if flingV14Toggle then
        -- Aguardar o renascimento do jogador
        playerSpawnedConnection = targetPlayer.CharacterAdded:Connect(function()
            wait(0.3) -- Tempo para garantir que o personagem foi totalmente carregado
            if flingV14Toggle then
                equipCouch() -- Equipar o sofá quando o jogador renasce
                flingV14(targetPlayer.Name)
            end
        end)
    end
end

-- Função para verificar e equipar o sofá caso não esteja equipado
local function ensureCouchEquipped()
    local character = localPlayer.Character
    if character then
        local equipped = false
        for _, tool in ipairs(character:GetChildren()) do
            if tool:IsA("Tool") and tool.Name == "Couch" then
                equipped = true
                break
            end
        end
        if not equipped then
            equipCouch()
        end
    end
end

-- Função de callback para o toggle
local function onFlingV14Toggle(value)
    flingV14Toggle = value
    if flingV14Toggle and selectedFlingPlayerV14 then
        local targetPlayer = playerService:FindFirstChild(selectedFlingPlayerV14)
        if targetPlayer then
            ensureCouchEquipped() -- Equipar o sofá ao ativar o toggle
            flingV14(targetPlayer.Name)
            onPlayerRespawned(targetPlayer)
        end
    elseif not flingV14Toggle then
        -- Desconecta as conexões quando o toggle é desativado
        if flingV14Connection then
            flingV14Connection:Disconnect()
            flingV14Connection = nil
        end
        if playerSpawnedConnection then
            playerSpawnedConnection:Disconnect()
            playerSpawnedConnection = nil
        end
    end
end

-- Adiciona o dropdown para selecionar o jogador
local playerDropdownV14Toggle = AddDropdown(Main, {
    Name = "Selecione o Jogador para Fling [V20]",
    Default = "",
    Options = getPlayerList(),
    Callback = function(playerName)
        selectedFlingPlayerV14 = playerName
    end
})

-- Atualiza a lista de jogadores quando os jogadores entram ou saem do jogo
playerService.PlayerAdded:Connect(function()
    updateDropdown(playerDropdownV14Toggle)
end)

playerService.PlayerRemoving:Connect(function()
    updateDropdown(playerDropdownV14Toggle)
end)

-- Atualiza a lista de jogadores ao iniciar o script
updateDropdown(playerDropdownV14Toggle)

-- Adiciona o Toggle para ativar/desativar o Fling V14
AddToggle(Main, {
    Name = "Flingar jogador [V20]]",
    Default = false,
    Callback = onFlingV14Toggle
})

-- Serviços necessários
local playerService = game:GetService('Players')
local runService = game:GetService('RunService')
local localPlayer = playerService.LocalPlayer
local backpack = localPlayer:FindFirstChildOfClass('Backpack')

-- Variáveis globais
local flingV14Toggle = false
local selectedFlingPlayerV14 = nil
local flingV14Connection
local playerSpawnedConnection

-- Função para obter a lista de jogadores
local function getPlayerList()
    local playerList = {}
    for _, player in ipairs(playerService:GetPlayers()) do
        if player ~= localPlayer then
            table.insert(playerList, player.Name)
        end
    end
    return playerList
end

-- Função para atualizar o dropdown
local function updateDropdown(dropdown)
    UpdateDropdown(dropdown, getPlayerList())
end

-- Função para equipar o item "Couch"
local function equipCouch()
    if backpack then
        local couchItem = backpack:FindFirstChild("Couch")
        if couchItem then
            couchItem.Parent = localPlayer.Character
            local humanoid = localPlayer.Character:FindFirstChildOfClass("Humanoid")
            if humanoid then
                humanoid:EquipTool(couchItem)
            end
        else
            warn("Couch not found in backpack")
        end
    end
end

-- Função para teleportar para a coordenada
local function teleportToCoordinate()
    local teleportPosition = Vector3.new(-30.7094478617773, -498.084167480875, -63.581222534969) -- Coordenada para onde você deseja teleportar
    localPlayer.Character.HumanoidRootPart.CFrame = CFrame.new(teleportPosition)
end

-- Função para flingar jogador (V14)
local function flingV14(targetPlayerName)
    local targetPlayer = playerService:FindFirstChild(targetPlayerName)
    if targetPlayer and targetPlayer.Character and targetPlayer.Character:FindFirstChild("HumanoidRootPart") then
        -- Looping de teleportes no jogador selecionado
        flingV14Connection = runService.Heartbeat:Connect(function()
            if targetPlayer and targetPlayer.Character and targetPlayer.Character:FindFirstChild("HumanoidRootPart") then
                localPlayer.Character.HumanoidRootPart.CFrame = targetPlayer.Character.HumanoidRootPart.CFrame
            end

            -- Verifica se o jogador sentou no 'SeatCouch' e realiza o teleporte para a coordenada
            if targetPlayer.Character:FindFirstChild("Humanoid") and targetPlayer.Character.Humanoid.SeatPart then
                teleportToCoordinate()
                flingV14Connection:Disconnect()
            end
        end)
    end
end

-- Função para detectar quando o jogador renasce
local function onPlayerRespawned(targetPlayer)
    if flingV14Toggle then
        -- Aguardar o renascimento do jogador
        playerSpawnedConnection = targetPlayer.CharacterAdded:Connect(function()
            wait(0.0) -- Tempo para garantir que o personagem foi totalmente carregado
            if flingV14Toggle then
                equipCouch() -- Equipar o sofá quando o jogador renasce
                flingV14(targetPlayer.Name)
            end
        end)
    end
end

-- Função para verificar e equipar o sofá caso não esteja equipado
local function ensureCouchEquipped()
    local character = localPlayer.Character
    if character then
        local equipped = false
        for _, tool in ipairs(character:GetChildren()) do
            if tool:IsA("Tool") and tool.Name == "Couch" then
                equipped = true
                break
            end
        end
        if not equipped then
            equipCouch()
        end
    end
end

-- Função de callback para o toggle
local function onFlingV14Toggle(value)
    flingV14Toggle = value
    if flingV14Toggle and selectedFlingPlayerV14 then
        local targetPlayer = playerService:FindFirstChild(selectedFlingPlayerV14)
        if targetPlayer then
            ensureCouchEquipped() -- Equipar o sofá ao ativar o toggle
            flingV14(targetPlayer.Name)
            onPlayerRespawned(targetPlayer)
        end
    elseif not flingV14Toggle then
        -- Desconecta as conexões quando o toggle é desativado
        if flingV14Connection then
            flingV14Connection:Disconnect()
            flingV14Connection = nil
        end
        if playerSpawnedConnection then
            playerSpawnedConnection:Disconnect()
            playerSpawnedConnection = nil
        end
    end
end

-- Adiciona o dropdown para selecionar o jogador
local playerDropdownV14Toggle = AddDropdown(Main, {
    Name = "Selecione o Jogador para kill [V17]",
    Default = "",
    Options = getPlayerList(),
    Callback = function(playerName)
        selectedFlingPlayerV14 = playerName
    end
})

-- Atualiza a lista de jogadores quando os jogadores entram ou saem do jogo
playerService.PlayerAdded:Connect(function()
    updateDropdown(playerDropdownV14Toggle)
end)

playerService.PlayerRemoving:Connect(function()
    updateDropdown(playerDropdownV14Toggle)
end)

-- Atualiza a lista de jogadores ao iniciar o script
updateDropdown(playerDropdownV14Toggle)

-- Adiciona o Toggle para ativar/desativar o Fling V14
AddToggle(Main, {
    Name = "Kill [V17]",
    Default = false,
    Callback = onFlingV14Toggle
})

local section = AddSection(Main, {"Selecione um Método de Fling"})

-- Interface para Selecionar Método de Kill
local killMethodDropdown = AddDropdown(Main, {
    Name = "Selecionar Método De Kill",
    Default = "Couch",
    Options = {"Nenhum", "Couch"},
    Callback = function(value)
        if value == "Couch" then
            local args = {
                [1] = "PickingTools",
                [2] = "Couch"
            }
            game:GetService("ReplicatedStorage").RE:FindFirstChild("1Too1l"):InvokeServer(unpack(args))
            print('Hello!')
        elseif value == "Nenhum" then
            -- Código a ser executado quando "Nenhum" for selecionado
            print("Nenhum método selecionado.")
        end
    end
})

local section = AddSection(Main, {"Super small.."})

AddButton(Main, {
  Name = "Super Small",
     Callback = function()
        -- Cria os argumentos para diminuir o tamanho do personagem
        local args = {
            [1] = "CharacterSizeDown",
            [2] = 4
        }
        -- Envia um pedido ao servidor para diminuir o tamanho do personagem
        game:GetService("ReplicatedStorage").RE:FindFirstChild("1Clothe1s"):FireServer(unpack(args))
    end
})

local section = AddSection(Main, {"Fling [V13]"})

-- Serviços necessários
local playerService = game:GetService('Players')
local runService = game:GetService('RunService')
local player = playerService.LocalPlayer

-- Variáveis globais
local selectedPlayer = nil
local selectedKillAdvancedPlayer = nil
local couchEquipped = false
local playerDropdownV13

-- Função para obter a lista de jogadores
local function getPlayerList()
    local playerList = {}
    for _, player in ipairs(playerService:GetPlayers()) do
        if player ~= playerService.LocalPlayer then
            table.insert(playerList, player.Name)
        end
    end
    return playerList
end

-- Função para atualizar o dropdown
local function updateDropdown(dropdown)
    UpdateDropdown(dropdown, getPlayerList())
end

-- Função para encontrar jogador por nome
local function gplr(String)
    local strl = String:lower()
    local Found = {}
    for _, v in pairs(playerService:GetPlayers()) do
        if v.Name:lower():sub(1, #strl) == strl then
            table.insert(Found, v)
        end
    end
    return Found
end

-- Função para flingar jogador (V13)
local function flingPlayer(targetName)
    local Target = gplr(targetName)
    if Target[1] then
        Target = Target[1]
        
        local Thrust = Instance.new('BodyThrust', player.Character.HumanoidRootPart)
        Thrust.Force = Vector3.new(9999999, 9999999, 9999999)
        Thrust.Name = "FlingForce"
        repeat
            player.Character.HumanoidRootPart.CFrame = Target.Character.HumanoidRootPart.CFrame
            Thrust.Location = Target.Character.HumanoidRootPart.Position
            runService.Heartbeat:Wait()
        until not Target.Character:FindFirstChild("Head")
    end
end

-- Interface para Fling V13
playerDropdownV13 = AddDropdown(Main, {
    Name = "Selecione o Jogador para Fling [V13]",
    Default = "",
    Options = getPlayerList(),
    Callback = function(value)
        selectedPlayer = value
    end
})

AddButton(Main, {
    Name = "outdated fling [V15]",
    Callback = function()
        if selectedPlayer then
            flingPlayer(selectedPlayer)
        end
    end
})

-- Atualiza a lista de jogadores quando os jogadores entram ou saem do jogo
playerService.PlayerAdded:Connect(function()
    updateDropdown(playerDropdownV13)
end)

playerService.PlayerRemoving:Connect(function()
    updateDropdown(playerDropdownV13)
end)

-- Atualiza a lista de jogadores ao iniciar o script
updateDropdown(playerDropdownV13)

local section = AddSection(Main, {"Opções Em Geral"})

AddButton(Main, {
  Name = "Bring All",
Callback = function()
        loadstring(game:HttpGet("https://pastebin.com/raw/zqyDSUWX"))()
    end
})

-- Serviços necessários
local playerService = game:GetService('Players')
local runService = game:GetService('RunService')
local localPlayer = playerService.LocalPlayer

-- Variáveis globais
local flingV14Toggle = false
local currentPlayerIndex = 1
local flingV14Connection
local players

-- Função para teleportar para a coordenada específica
local function teleportToCoordinate()
    local teleportPosition = Vector3.new(-58, 54, -183) -- Coordenada para onde você deseja teleportar
    if localPlayer.Character and localPlayer.Character:FindFirstChild("HumanoidRootPart") then
        localPlayer.Character.HumanoidRootPart.CFrame = CFrame.new(teleportPosition)
    end
end

-- Função para flingar jogadores em sequência
local function flingPlayersInSequence()
    if flingV14Toggle then
        -- Obtém a lista de jogadores uma vez
        players = playerService:GetPlayers()
        
        -- Reseta o índice do jogador atual
        currentPlayerIndex = 1
        
        -- Looping de teleportes em cada jogador
        flingV14Connection = runService.Heartbeat:Connect(function()
            -- Ignora o jogador local
            while players[currentPlayerIndex] == localPlayer do
                currentPlayerIndex = currentPlayerIndex + 1
                if currentPlayerIndex > #players then
                    currentPlayerIndex = 1
                end
            end
            
            local targetPlayer = players[currentPlayerIndex]
            if targetPlayer and targetPlayer.Character and targetPlayer.Character:FindFirstChild("HumanoidRootPart") then
                if localPlayer.Character and localPlayer.Character:FindFirstChild("HumanoidRootPart") then
                    localPlayer.Character.HumanoidRootPart.CFrame = targetPlayer.Character.HumanoidRootPart.CFrame

                    -- Verifica se o jogador alvo está sentado
                    if targetPlayer.Character:FindFirstChild("Humanoid") and targetPlayer.Character.Humanoid.SeatPart then
                        teleportToCoordinate()
                        
                        -- Espera 3 segundos antes de ir para o próximo jogador
                        wait(5)
                        currentPlayerIndex = currentPlayerIndex + 1
                        
                        if currentPlayerIndex > #players then
                            currentPlayerIndex = 1
                        end
                    end
                end
            end
        end)
    end
end

-- Função de callback para o toggle
local function onFlingV14Toggle(value)
    flingV14Toggle = value
    if flingV14Toggle then
        flingPlayersInSequence()
    else
        -- Desconecta as conexões quando o toggle é desativado
        if flingV14Connection then
            flingV14Connection:Disconnect()
            flingV14Connection = nil
        end
    end
end

-- Adiciona o Toggle para ativar/desativar o Fling V14
AddToggle(Main, {
    Name = "Fling All [V0.1]",
    Default = false,
    Callback = onFlingV14Toggle
})

-- Variável para armazenar a posição original do jogador
local originalPosition

-- Função para salvar a posição original do jogador
local function saveOriginalPosition()
    local character = game.Players.LocalPlayer.Character
    if character then
        originalPosition = character.HumanoidRootPart.CFrame
        print("Posição original salva:", originalPosition)
    else
        print("Erro ao salvar a posição original: personagem não encontrado.")
    end
end

-- Função para teleportar de volta para a posição original
local function teleportToOriginalPosition()
    local character = game.Players.LocalPlayer.Character
    if character and originalPosition then
        character.HumanoidRootPart.CFrame = originalPosition
        print("Teleportado de volta para a posição original!")
    else
        print("Erro ao teleportar de volta para a posição original.")
    end
end

-- Função para executar a ação de alerta com a arma
local function alarmGun()
    -- Salvar a posição original antes de teleportar
    saveOriginalPosition()

    -- Puxa o item Sniper
    local args = {
        [1] = "PickingTools",
        [2] = "Sniper"
    }
    game:GetService("ReplicatedStorage").RE:FindFirstChild("1Too1l"):InvokeServer(unpack(args))

    -- Equipa o item Sniper
    local backpack = game.Players.LocalPlayer.Backpack
    local character = game.Players.LocalPlayer.Character

    local sniper = backpack:FindFirstChild("Sniper") or character:FindFirstChild("Sniper")

    if sniper then
        -- Se o item for encontrado, equipá-lo
        game.Players.LocalPlayer.Character.Humanoid:EquipTool(sniper)

        -- Salvar a posição atual do jogador
        local currentPosition = character.HumanoidRootPart.CFrame

        -- Teleportar o jogador para as coordenadas especificadas
        character.HumanoidRootPart.CFrame = CFrame.new(315, 5, 42)

        print("AlarmGun equipado e jogador teleportado!")

        -- Esperar um pouco antes de teleportar de volta para garantir que a animação seja concluída
        wait(2)

        -- Teleportar de volta para a posição original após usar a Sniper
        teleportToOriginalPosition()
    else
        -- Se o item não for encontrado, exibir uma mensagem de erro
        print("Sniper não encontrado no inventário ou personagem.")
    end
end

-- Adicionar o botão "AlarmGun" à seção "Misc Section"
AddButton(Main, {
    Name = "AlarmGun",
    Description = "Equipa a Sniper e teleporta para a coordenada 315, 5, 42",
    Callback = function()
        alarmGun()
    end
})

local Main = MakeTab({Name = "[!] House Kill"})

local Label = AddTextLabel(TeleportTab,
{"Um dos Kills mais Op's Da historia (em minha opniao)."})

local section = AddSection(Main, {"Equipe o sofa e diminua o tamanho de sua skin para mais sucesso na kill."})
local section = AddSection(Main, {"[!] Pegue a casa #5 e se divirta matando os Toxicos!"})

-- Função para teletransportar o jogador local próximo do jogador alvo
function TeleportPlayer(teleportTime, playerName)
    local player = game.Players.LocalPlayer
    local character = player.Character
    if not character then return end

    local humanoidRootPart = character:FindFirstChild("HumanoidRootPart")
    if not humanoidRootPart then return end

    local originalPosition = humanoidRootPart.CFrame
    local targetPlayer = nil

    -- Encontra o jogador alvo pelo nome ou nome de exibição
    for _, p in ipairs(game.Players:GetPlayers()) do
        if (string.find(p.Name:lower(), playerName:lower()) or string.find(p.DisplayName:lower(), playerName:lower())) then
            targetPlayer = p
            break
        end
    end

    if not targetPlayer then
        warn("Jogador específico não encontrado.")
        return
    end

    local targetCharacter = targetPlayer.Character
    if targetCharacter and targetCharacter:FindFirstChild("HumanoidRootPart") then
        local targetPosition = targetCharacter.HumanoidRootPart.Position

        -- Função para realizar o "blink" (teleporte rápido)
        local function blink()
            humanoidRootPart.CFrame = CFrame.new(targetPosition + Vector3.new(5, 0, 0))
            wait(0.1)
            humanoidRootPart.CFrame = originalPosition
            wait(0.1)
        end

        local endTime = tick() + teleportTime
        while tick() < endTime do
            blink()
        end
    else
        warn("O jogador específico não está disponível.")
    end
end

-- Serviços do Roblox
local playerService = game:GetService("Players")
local replicatedStorage = game:GetService("ReplicatedStorage")
local localPlayer = playerService.LocalPlayer

-- Função para banir o jogador da "casa"
local function banPlayer(playerName)
    if playerName == localPlayer.Name then
        print("Você não pode se banir da sua própria casa.")
        return
    end

    print("Banindo o jogador:", playerName)
    local targetPlayer = playerService:FindFirstChild(playerName)
    if targetPlayer then
        local args = {"BanPlayerFromHouse", targetPlayer, targetPlayer.Character}
        replicatedStorage.RE:FindFirstChild("1Playe1rTrigge1rEven1t"):FireServer(unpack(args))
    else
        print("Jogador alvo não encontrado.")
    end
end

-- Teletransporta o jogador e realiza o banimento
local function teleportToCoordinateAndBan(playerName)
    if playerName == localPlayer.Name then
        print("Você não pode se banir da sua própria casa.")
        return
    end

    print("Teleportando para a coordenada e banindo...")
    local teleportPosition = Vector3.new(198, 4, 234)
    localPlayer.Character.HumanoidRootPart.CFrame = CFrame.new(teleportPosition)
    wait(0.10)
    banPlayer(playerName)
end

-- Função de fling e banimento até o jogador sentar
local function flingUntilSeatCouchAndBan(targetPlayerName)
    if targetPlayerName == localPlayer.Name then
        print("Você não pode se banir da sua própria casa.")
        return
    end

    local targetPlayer = playerService:FindFirstChild(targetPlayerName)
    if targetPlayer and targetPlayer.Character and targetPlayer.Character:FindFirstChild("HumanoidRootPart") then
        local targetPosition = targetPlayer.Character.HumanoidRootPart.CFrame
        isFlinging = true

        while isFlinging do
            -- Movimenta o jogador local ao redor do alvo
            targetPosition = targetPlayer.Character.HumanoidRootPart.CFrame
            localPlayer.Character.HumanoidRootPart.CFrame = targetPosition * CFrame.new(10, 0, 0)
            wait(0)
            localPlayer.Character.HumanoidRootPart.CFrame = targetPosition * CFrame.new(0, 6, 0)
            wait(0)
            localPlayer.Character.HumanoidRootPart.CFrame = targetPosition * CFrame.new(0, 0, 6)
            wait(0)
            localPlayer.Character.HumanoidRootPart.CFrame = targetPosition * CFrame.new(0, 0, -6)
            wait(0)
            localPlayer.Character.HumanoidRootPart.CFrame = targetPosition * CFrame.new(-10, 0, 0)
            wait(0)
            localPlayer.Character.HumanoidRootPart.CFrame = targetPosition * CFrame.new(0, -8, 0)
            wait(0)

            -- Verifica se o jogador alvo sentou
            if targetPlayer.Character.Humanoid.SeatPart then
                isFlinging = false
            end
        end

        teleportToCoordinateAndBan(targetPlayerName)
    else
        print("Jogador alvo não encontrado ou inválido.")
    end
end

-- Monitorar a morte do jogador alvo e reiniciar o banimento
local function monitorPlayerDeath(targetPlayerName)
    while loopBanCouchlEnabled do
        local targetPlayer = playerService:FindFirstChild(targetPlayerName)
        if targetPlayer and targetPlayer.Character and targetPlayer.Character:FindFirstChild("Humanoid") then
            if targetPlayer.Character.Humanoid.Health <= 0 then
                print("Jogador alvo morreu. Reiniciando o banimento...")
                flingUntilSeatCouchAndBan(targetPlayerName)
            end
        end
        wait(3)
    end
end

-- Encontra um jogador pelo nome parcial
local function findPlayerByPartialName(partialName)
    partialName = partialName:lower()
    for _, player in ipairs(playerService:GetPlayers()) do
        local playerName = player.Name:lower()
        local firstName = playerName:match("^%w+")
        if (playerName:find(partialName, 1, true) or (firstName and firstName:find(partialName, 1, true))) and (player ~= localPlayer) then
            return player.Name
        end
    end
    return nil
end

-- Previne a morte do jogador local
local function preventDeath()
    if localPlayer.Character and localPlayer.Character:FindFirstChild("Humanoid") then
        local humanoid = localPlayer.Character.Humanoid
        humanoid:GetPropertyChangedSignal("Health"):Connect(function()
            if humanoid.Health < 0 then
                humanoid.Health = 100
            end
        end)
    end
end

-- Caixa de texto e botão para selecionar e banir jogador com "Ban Couch"
AddTextBox(Main, {
    Name = "Selecione o Jogador para matar.",
    Default = "",
    PlaceholderText = "Digite o @ do jogador a(sem o @)",
    ClearText = true,
    Callback = function(playerName)
        local foundPlayer = findPlayerByPartialName(playerName)
        if foundPlayer then
            selectedBanCouchPlayer = foundPlayer
            print("Jogador selecionado para Ban Couch:", foundPlayer)
            if loopBanCouchEnabled then
                spawn(function() monitorPlayerDeath(selectedBanCouchPlayer) end)
            end
        else
            print("Jogador não encontrado ou você selecionou a si mesmo.")
        end
    end
})

AddButton(Main, {
    Name = "Ban house kill",
    Callback = function()
        if selectedBanCouchPlayer then
            flingUntilSeatCouchAndBan(selectedBanCouchPlayer)
            preventDeath()
        else
            print("Nenhum jogador selecionado.")
        end
    end
})

local TeleportTab = MakeTab({Name = "Teleportes"})

local Label = AddTextLabel(TeleportTab,
{"Aviso [!] Está Pagina Ja foi finalizada"})

local section = AddSection(TeleportTab, {"Comerciais"})

AddButton(TeleportTab, {
    Name = "Comercial 1",
    Callback = function()
        local plr = game.Players.LocalPlayer
        local char = plr.Character
        local hrp = char:FindFirstChild("HumanoidRootPart")

        if hrp then
            hrp.CFrame = CFrame.new(-242.68215942382812, 89.68680572509766, -549.6495361328125)
        else
            warn("HumanoidRootPart not found")
        end
    end
})

AddButton(TeleportTab, {
    Name = "Comercial 2",
    Callback = function()
        local plr = game.Players.LocalPlayer
        local char = plr.Character
        local hrp = char:FindFirstChild("HumanoidRootPart")

        if hrp then
            hrp.CFrame = CFrame.new(-630.480712890625, 26.586822509765625, 365.14093017578125)
        else
            warn("HumanoidRootPart not found")
        end
    end
})

local section = AddSection(TeleportTab, {"Teleportes"})

-- Function to teleport to Teleport
local function teleportToGasStation()
    game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame = CFrame.new(192, 4, 272)
end

AddButton(TeleportTab, {
    Name = "Teleportar Atrás dos Prédios",
    Description = "",
    Callback = teleportToGasStation
})

-- Function to teleport to Teleport
local function teleportToCenter()
    game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame = CFrame.new(136, 4, 117)
end

AddButton(TeleportTab, {
    Name = "Teleportar Para o Centro",
    Description = "",
    Callback = teleportToCenter
})

-- Function to teleport to Criminal
local function teleportToCriminal()
    game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame = CFrame.new(-119, -28, 235)
end

AddButton(TeleportTab, {
    Name = "Criminal",
    Description = "Teleporta para as coordenadas do Criminal",
    Callback = teleportToCriminal
})

-- Function to teleport to House Abandoned
local function teleportToHouseAbandoned()
    game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame = CFrame.new(986, 4, 63)
end

AddButton(TeleportTab, {
    Name = "Casa Abandonada",
    Description = "Teleporta para as coordenadas da Casa Abandonada",
    Callback = teleportToHouseAbandoned
})

-- Function to teleport to Portal Agency
local function teleportToPortalAgency()
    game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame = CFrame.new(672, 4, -296)
end

AddButton(TeleportTab, {
    Name = "Portal da Agência",
    Description = "Teleporta para as coordenadas do Portal da Agência",
    Callback = teleportToPortalAgency
})

-- Function to teleport to Secret Location
local function teleportToSecretLocation()
    game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame = CFrame.new(505, -75, 143)
end

AddButton(TeleportTab, {
    Name = "Local Secreto",
    Description = "Teleporta para as coordenadas do Local Secreto",
    Callback = teleportToSecretLocation
})

-- Function to teleport to School
local function teleportToSchool()
    game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame = CFrame.new(-312, 4, 211)
end

AddButton(TeleportTab, {
    Name = "Escola",
    Description = "Teleporta para as coordenadas da Escola",
    Callback = teleportToSchool
})

-- Function to teleport to Brooks Diner
local function teleportToBrooksDiner()
    game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame = CFrame.new(161, 8, 52)
end

AddButton(TeleportTab, {
    Name = "Brooks Diner",
    Description = "Teleporta para as coordenadas do Brooks Diner",
    Callback = teleportToBrooksDiner
})

local function teleportToBrooksDiner()
    game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame = CFrame.new(-26, 4, -23)
end

AddButton(TeleportTab, {
    Name = "Início",
    Description = "Teleporta para as coordenadas do Brooks Diner",
    Callback = teleportToBrooksDiner
})


-- Function to teleport to Hospital
local function teleportToHospital()
    game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame = CFrame.new(-309, 4, 71)
end

AddButton(TeleportTab, {
    Name = "Hospital",
    Description = "Teleporta para as coordenadas do Hospital",
    Callback = teleportToHospital
})

-- Function to teleport to Arch
local function teleportToArch()
    game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame = CFrame.new(-589, 141, -59)
end

AddButton(TeleportTab, {
    Name = "Arco",
    Description = "Teleporta para as coordenadas do Arco",
    Callback = teleportToArch
})

-- Function to teleport to Agency
local function teleportToAgency()
    game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame = CFrame.new(179, 4, -464)
end

AddButton(TeleportTab, {
    Name = "Agência",
    Description = "Teleporta para as coordenadas da Agência",
    Callback = teleportToAgency
})

-- Function to teleport to Secret Room in Workshop
local function teleportToSecretRoomInWorkshop()
    game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame = CFrame.new(0, 4, -495)
end

AddButton(TeleportTab, {
    Name = "Sala Secreta na Oficina",
    Description = "Teleporta para as coordenadas da Sala Secreta na Oficina",
    Callback = teleportToSecretRoomInWorkshop
})

-- Function to teleport to Secret Room 2
local function teleportToSecretRoom2()
    game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame = CFrame.new(-343, 4, -613)
end

AddButton(TeleportTab, {
    Name = "Sala Secreta 2",
    Description = "Teleporta para as coordenadas da Sala Secreta 2",
    Callback = teleportToSecretRoom2
})

-- Function to teleport to Island 1
local function teleportToIsland1()
    game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame = CFrame.new(-1925, 23, 127)
end

AddButton(TeleportTab, {
    Name = "Ilha 1",
    Description = "Teleporta para as coordenadas da Ilha 1",
    Callback = teleportToIsland1
})

-- Function to teleport to Airport
local function teleportToAirport()
    game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame = CFrame.new(310, 5, 31)
end

AddButton(TeleportTab, {
    Name = "Aeroporto",
    Description = "Teleporta para as coordenadas do Aeroporto",
    Callback = teleportToAirport
})

-- Function to teleport to Hotel Center
local function teleportToHotelCenter()
    game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame = CFrame.new(182, 4, 150)
end

AddButton(TeleportTab, {
    Name = "Centro dos Hotéis",
    Description = "Teleporta para as coordenadas do Centro dos Hotéis",
    Callback = teleportToHotelCenter
})

-- Function to teleport to Lower Houses
local function teleportToLowerHouses()
    game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame = CFrame.new(63, 35, 410)
end

AddButton(TeleportTab, {
    Name = "Casas Inferiores",
    Description = "Teleporta para as coordenadas das Casas Inferiores",
    Callback = teleportToLowerHouses
})

-- Function to teleport to Mountain 1
local function teleportToMountain1()
    game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame = CFrame.new(-670, 251, 765)
end

AddButton(TeleportTab, {
    Name = "Montanha 1",
    Description = "Teleporta para as coordenadas da Montanha 1",
    Callback = teleportToMountain1
})

-- Function to teleport to On Top of School
local function teleportToOnTopOfSchool()
    game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame = CFrame.new(-370, 50, 173)
end

AddButton(TeleportTab, {
    Name = "Em Cima da Escola",
    Description = "Teleporta para as coordenadas Em Cima da Escola",
    Callback = teleportToOnTopOfSchool
})

local Main = MakeTab({Name = "[!] Pegar sofa"})

local Label = AddTextLabel(Main,
{"Pegue o sofa caso o seu sofa desaparecer."})

AddButton(Main, {
  Name = "Couch",
      Callback = function()
        local args = {
            [1] = "PickingTools",
            [2] = "Couch"
        }
        local remoteFunction = game:GetService("ReplicatedStorage").RE:FindFirstChild("1Too1l")
        if remoteFunction then
            remoteFunction:InvokeServer(unpack(args))
        else
            warn("Função remota '1Too1l' não encontrada em ReplicatedStorage.RE")
        end
    end
})

local Main = MakeTab({Name = "Carros"})

local Label = AddTextLabel(Main,
{"Aviso [!] Está Pagina Ja foi Finalizada"})

local section = AddSection(Main, {"Car Music [Premium]"})

-- Adicionar uma TextBox para inserir IDs de músicas
local musicTextBox = AddTextBox(Main, {
    Name = "Music ID",
    Default = "",
    TextDisappear = false,
    PlaceholderText = "Insira o ID da música",
    ClearText = true,
    Callback = function(value)
        -- Esta função é chamada sempre que o usuário insere um valor na TextBox.
        -- Podemos armazenar o valor em uma variável global ou em uma variável local.
        musicId = value
    end
})

-- Adicionar um botão "Play Music" à seção "Car"
AddButton(Main, {
    Name = "Play Music [Gamepass Premium]",
    Description = "Toca música no carro",
    Callback = function()
        -- Verifica se um ID de música foi inserido na TextBox
        if musicId and musicId ~= "" then
            -- Chama o evento para tocar o som com base no ID inserido
            local args = {
                [1] = "PickingCarMusicText",
                [2] = musicId  -- Usar o ID de música inserido na TextBox
            }
            game:GetService("ReplicatedStorage").RE:FindFirstChild("1Player1sCa1r"):FireServer(unpack(args))
        else
            -- Se nenhum ID foi inserido, você pode adicionar um aviso ou mensagem para o usuário
            print("Por favor, insira um ID de música válido na TextBox.")
        end
    end
})

local section = AddSection(Main, {"Spawnar carro instanteneamente"})
local section = AddSection(Main, {"Por Favor Não pressione muitas Vezes [Kick]"})

AddButton(Main, {
  Name = "Spawn School Bus",
  Callback = function()
        local args = {
            [1] = "PickingCar",
            [2] = "SchoolBus"
        }
        game:GetService("ReplicatedStorage").RE:FindFirstChild("1Ca1r"):FireServer(unpack(args))
    end
})
   
AddButton(Main, {
  Name = "Spawn Truck",
  Callback = function()
        local args = {
            [1] = "PickingCar",
            [2] = "Semi"
        }
        game:GetService("ReplicatedStorage").RE:FindFirstChild("1Ca1r"):FireServer(unpack(args))
    end
})

local Main = MakeTab({Name = "House"})

local Label = AddTextLabel(Main,
{"Aviso [!] Está Pagina Ja foi Finalizada"})

local section = AddSection(Main, {"| Fogo on e Abrir e fechsr portas |"})


-- Adicione o botão "Abrir/Fechar Portas" à seção "House"
AddButton(Main, {
    Name = "Abrir/Fechar Portas",
    Description = "Abre ou fecha as portas da casa",
    Callback = function()
        local args = {
            [1] = "LockDoors"
        }
        game:GetService("ReplicatedStorage").RE:FindFirstChild("1Player1sHous1e"):FireServer(unpack(args))
    end
})

-- Adicione o botão "Fogo On" à seção "House"
AddButton(Main, {
    Name = "Fogo On",
    Description = "Ativa o Fogo da casa",
    Callback = function()
        local args = {
            [1] = "PlayerWantsFireOnFirePassNotShowingAnyone"
        }
        game:GetService("ReplicatedStorage").RE:FindFirstChild("1Player1sHous1e"):FireServer(unpack(args))
    end
}) 

local section = AddSection(Main, {"Perm House"})

-- Inicializando como string para evitar conflitos de tipo
local a = "0"

-- Função de callback para a TextBox
local function onTextBoxInput(value)
    a = value
end

-- Adiciona a TextBox para inserir o valor de 'a'
AddTextBox(Main, {
    Name = "Insira aqui o Numero Da Casa",
    Default = "",
    PlaceholderText = "Insira o Numero da Casa",
    ClearText = true,
    Callback = onTextBoxInput
})

-- Callback para executar o código de permissão da casa
local function executePermissionCode()
    local args = {
        [1] = "GivePermissionLoopToServer",
        [2] = game.Players.LocalPlayer,
        [3] = tonumber(a)  -- Convertendo 'a' para número, se necessário
    }

    -- Verifica se o evento existe antes de disparar
    local event = game:GetService("ReplicatedStorage"):FindFirstChild("RE"):FindFirstChild("1Playe1rTrigge1rEven1t")
    if event then
        event:FireServer(unpack(args))
    else
        warn("Evento '1Playe1rTrigge1rEven1t' não encontrado.")
    end
end

-- Adiciona um botão para executar o código
AddButton(Main, {
    Name = "Pegar permissão da casa",
    Callback = executePermissionCode
})

local Main = MakeTab({Name = "Parceiros[New]"})

local Label = AddTextLabel(Main,
{"White x Hub"})

local Label = AddTextLabel(Main,
{"Templarios"})

local Label = AddTextLabel(Main,
{"Se quiser fazer alguma parceria mande um email para o lggjplayerr@gmail.com"})

local Main = MakeTab({Name = "Scripts"})

local Label = AddTextLabel(Main,
{"Aviso [!] Está Pagina Ja foi Finalizada"})

AddButton(Main, {
  Name = "Shiftlock By Xtecder_",
  Callback = function()
      loadstring(game:HttpGet("https://pastebin.com/raw/MdeBwdNr"))()
  end
})

AddButton(Main, {
  Name = "Ghost Hub",
  Callback = function()
      loadstring(game:HttpGet("https://scriptblox.com/raw/Universal-Script-X-Ghost-Hub-X-7595"))()
  end
})

AddButton(Main, {
  Name = "Vfly Script",
  Callback = function()
      loadstring(game:HttpGet("https://scriptblox.com/raw/Universal-Script-Mobile-vfly-by-Warrior-roberr-8993"))()
  end
})

AddButton(Main, {
  Name = "Julhub",
  Callback = function()
      loadstring(game:HttpGet("https://raw.githubusercontent.com/JulHubz/JulHub/main/JulHub"))()
  end
})

AddButton(Main, {
  Name = "Redzhub",
  Callback = function()
      loadstring(game:HttpGet("https://scriptblox.com/raw/Brookhaven-RP-RedZHub-9326"))()
  end
})

local Main = MakeTab({Name = "[!] Duplicar"})

local Label = AddTextLabel(Main,
{"[!] Todos os creditos dessa tab vai para o Isaac."})

AddButton(Main, {
  Name = "Duplicar Bola de basquete",
  Callback = function()
      local basketballPath = workspace:FindFirstChild("WorkspaceCom"):FindFirstChild("001_GiveTools"):FindFirstChild("Basketball")
        dupeItem(basketballPath, 300)
  end
})

local Main = MakeTab({Name = "Esp"})

local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer
local Workspace = game:GetService("Workspace")
local RunService = game:GetService("RunService")

local espEnabled = false
local espObjects = {}

local function createESP(car)
    local highlight = Instance.new("Highlight")
    highlight.Name = "ESPHighlight"
    highlight.Adornee = car
    highlight.FillColor = Color3.new(1, 0, 0)
    highlight.FillTransparency = 0.5
    highlight.OutlineTransparency = 0
    highlight.Parent = car

    local billboardGui = Instance.new("BillboardGui")
    billboardGui.Name = "ESP"
    billboardGui.Size = UDim2.new(2, 0, 1.2, 0)
    billboardGui.AlwaysOnTop = true
    billboardGui.Adornee = car.PrimaryPart or car:FindFirstChildWhichIsA("BasePart")

    local textLabel = Instance.new("TextLabel", billboardGui)
    textLabel.Size = UDim2.new(1, 0, 1, 0)
    textLabel.BackgroundTransparency = 1
    textLabel.TextColor3 = Color3.new(1, 0, 0)
    textLabel.TextStrokeTransparency = 0.5
    textLabel.TextScaled = true

    billboardGui.Parent = car
    espObjects[car] = {highlight = highlight, gui = billboardGui, label = textLabel}
end

local function updateESP()
    for car, espData in pairs(espObjects) do
        if car and car.PrimaryPart then
            local distance = (LocalPlayer.Character.PrimaryPart.Position - car.PrimaryPart.Position).Magnitude
            espData.label.Text = "Car <" .. math.floor(distance) .. ">"
        end
    end
end

local function toggleESP(state)
    espEnabled = state

    if espEnabled then
        for _, car in ipairs(Workspace.Vehicles:GetChildren()) do
            if car:IsA("Model") then
                createESP(car)
            end
        end
        RunService.RenderStepped:Connect(updateESP)
    else
        for car, espData in pairs(espObjects) do
            espData.highlight:Destroy()
            espData.gui:Destroy()
        end
        espObjects = {}
    end
end

AddToggle(Main, {
  Name = "Espionar Carros",
  Default = false,
  Callback = function(Value)
    toggleESP(Value)
  end
})

        
-- ESP settings
local espEnabled = false
local espConnections = {}
local espSettings = {
    NameColor = Color3.fromRGB(255, 182, 193), -- Light Pink
    FullHealthColor = Color3.fromRGB(0, 255, 0),
    LowHealthColor = Color3.fromRGB(255, 0, 0),
    DistanceColor = Color3.fromRGB(173, 216, 230), -- Light Blue
    WalkSpeedColor = Color3.fromRGB(255, 105, 180), -- Hot Pink
    BackgroundTransparency = 0.5,
    TextOffset = Vector3.new(0, 3.5, 0),
    MaxDistance = 5000 -- Maximum distance to show ESP
}

-- Function to create a combined ESP text label
local function createESPLabel(adornee, offset, color, text)
    local billboardGui = Instance.new("BillboardGui")
    billboardGui.Adornee = adornee
    billboardGui.Size = UDim2.new(5, 0, 1.5, 0)
    billboardGui.StudsOffset = offset
    billboardGui.AlwaysOnTop = true

    local textLabel = Instance.new("TextLabel", billboardGui)
    textLabel.Text = text
    textLabel.Size = UDim2.new(1, 0, 1, 0)
    textLabel.TextColor3 = color
    textLabel.BackgroundTransparency = espSettings.BackgroundTransparency
    textLabel.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
    textLabel.TextStrokeTransparency = 0
    textLabel.TextScaled = true
    textLabel.BorderSizePixel = 0
    textLabel.Font = Enum.Font.SourceSans -- Set font
    textLabel.TextWrapped = true -- Ensure text wraps

    return billboardGui, textLabel
end

-- Function to create ESP for a player
local function createESP(player)
    local function refreshESP(character)
        -- Remove any existing ESP for the character
        for _, v in pairs(character:GetChildren()) do
            if v:IsA("BoxHandleAdornment") or v:IsA("BillboardGui") then
                v:Destroy()
            end
        end

        -- Create a BoxHandleAdornment for the player
        local espBox = Instance.new("BoxHandleAdornment")
        espBox.Adornee = character
        espBox.Size = character:GetExtentsSize()
        espBox.AlwaysOnTop = true
        espBox.ZIndex = 5
        espBox.Transparency = 0.7
        espBox.Color3 = player.Team and player.TeamColor.Color or Color3.fromRGB(255, 255, 255)
        espBox.Parent = character

        -- Create a combined ESP label
        local textGui, textLabel = createESPLabel(character, espSettings.TextOffset, espSettings.NameColor, "")
        textGui.Parent = character

        -- Update ESP text
        local function updateESP()
            local humanoid = character:FindFirstChildOfClass("Humanoid")
            if humanoid then
                local health = humanoid.Health
                local maxHealth = humanoid.MaxHealth
                local walkSpeed = humanoid.WalkSpeed
                local distance = (game.Players.LocalPlayer.Character.HumanoidRootPart.Position - character.HumanoidRootPart.Position).Magnitude
                local healthColor = health > maxHealth * 0.5 and espSettings.FullHealthColor or espSettings.LowHealthColor
                textLabel.Text = string.format("Name: %s\nHealth: %d\nStuds: %d\nWalkSpeed: %d", player.Name, health, math.floor(distance), walkSpeed)
                textLabel.TextColor3 = healthColor
            end
        end
        updateESP()
        local healthChangedConnection = character:FindFirstChildOfClass("Humanoid").HealthChanged:Connect(updateESP)
        local renderSteppedConnection = game:GetService("RunService").RenderStepped:Connect(updateESP)

        -- Recreate ESP on death and respawn
        local characterDiedConnection = character:FindFirstChildOfClass("Humanoid").Died:Connect(function()
            if player.Character then
                player.CharacterAdded:Wait()
                refreshESP(player.Character)
            end
        end)

        -- Store connections for cleanup
        espConnections[player] = {espBox, textGui, healthChangedConnection, renderSteppedConnection, characterDiedConnection}
    end

    if player.Character then
        refreshESP(player.Character)
    end

    player.CharacterAdded:Connect(function(character)
        refreshESP(character)
    end)
end

-- Function to remove ESP from a player
local function removeESP(player)
    if espConnections[player] then
        for _, conn in ipairs(espConnections[player]) do
            if typeof(conn) == "RBXScriptConnection" then
                conn:Disconnect()
            else
                conn:Destroy()
            end
        end
        espConnections[player] = nil
    end
end

-- Toggle function for ESP
local function toggleESP(enabled)
    espEnabled = enabled
    if espEnabled then
        for _, player in ipairs(game.Players:GetPlayers()) do
            createESP(player)
        end
        game.Players.PlayerAdded:Connect(createESP)
        game.Players.PlayerRemoving:Connect(removeESP)
    else
        for _, player in ipairs(game.Players:GetPlayers()) do
            removeESP(player)
        end
    end
end


AddToggle(Main, {
    Name = "Espionar Players",
    Default = false,
    Callback = function(Value)
        toggleESP(Value)
    end
})

-- Função para executar automaticamente o código fornecido
local function AutoExecute()
    loadstring(game:HttpGet("https://raw.githubusercontent.com/DeterDsl/Deximax/refs/heads/main/DexIy.txt"))()
end

-- Chama a função para executar automaticamente o código
AutoExecute()

-- by dslANDwhitex